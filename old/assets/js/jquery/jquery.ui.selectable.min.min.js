/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var c,b=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var e=a(this),d=e.offset();a.data(this,"selectable-item",{element:this,$element:e,left:d.left,top:d.top,right:d.left+e.outerWidth(),bottom:d.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(c){var b=this,d=this.options;this.opos=[c.pageX,c.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",c),a(d.appendTo).append(this.helper),this.helper.css({left:c.pageX,top:c.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=a.data(this,"selectable-item");e.startselected=!0,c.metaKey||c.ctrlKey||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,b._trigger("unselecting",c,{unselecting:e.element}))}),a(c.target).parents().addBack().each(function(){var e,f=a.data(this,"selectable-item");return f?(e=!c.metaKey&&!c.ctrlKey||!f.$element.hasClass("ui-selected"),f.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),f.unselecting=!e,f.selecting=e,f.selected=e,e?b._trigger("selecting",c,{selecting:f.element}):b._trigger("unselecting",c,{unselecting:f.element}),!1):undefined}))},_mouseDrag:function(d){if(this.dragged=!0,!this.options.disabled){var c,f=this,k=this.options,b=this.opos[0],j=this.opos[1],g=d.pageX,e=d.pageY;return b>g&&(c=g,g=b,b=c),j>e&&(c=e,e=j,j=c),this.helper.css({left:b,top:j,width:g-b,height:e-j}),this.selectees.each(function(){var m=a.data(this,"selectable-item"),h=!1;m&&m.element!==f.element[0]&&("touch"===k.tolerance?h=!(m.left>g||b>m.right||m.top>e||j>m.bottom):"fit"===k.tolerance&&(h=m.left>b&&g>m.right&&m.top>j&&e>m.bottom),h?(m.selected&&(m.$element.removeClass("ui-selected"),m.selected=!1),m.unselecting&&(m.$element.removeClass("ui-unselecting"),m.unselecting=!1),m.selecting||(m.$element.addClass("ui-selecting"),m.selecting=!0,f._trigger("selecting",d,{selecting:m.element}))):(m.selecting&&((d.metaKey||d.ctrlKey)&&m.startselected?(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.$element.addClass("ui-selected"),m.selected=!0):(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.startselected&&(m.$element.addClass("ui-unselecting"),m.unselecting=!0),f._trigger("unselecting",d,{unselecting:m.element}))),m.selected&&(d.metaKey||d.ctrlKey||m.startselected||(m.$element.removeClass("ui-selected"),m.selected=!1,m.$element.addClass("ui-unselecting"),m.unselecting=!0,f._trigger("unselecting",d,{unselecting:m.element})))))}),!1}},_mouseStop:function(c){var b=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,b._trigger("unselected",c,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,b._trigger("selected",c,{selected:d.element})}),this._trigger("stop",c),this.helper.remove(),!1}})})(jQuery);